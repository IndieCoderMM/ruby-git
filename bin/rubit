#!/usr/bin/env ruby

command, *args = ARGV

if command.nil?
    $stderr.puts "ğŸ“ƒ Syntax: rubit <command> [<args>]"
    $stderr.puts "ğŸ’¡ Try 'rubit -h' to see available commands"
    exit 1
end

if command == '-h' || command == '--help' 
    puts 'ğŸ”§ Rubit - Available Commands'
    puts '------------------------------'
    puts "- init         - ğŸŒ± Initialize a new Rubit project"
    puts "- add <file>   - ğŸ“ Add a file to the staging area"
    puts "- commit       - ğŸ’¾ Commit the staged changes"
    puts "- status       - ğŸ” Show the current status"
    puts "- log          - ğŸ“œ Display the commit history"
    exit 0
end

path_to_command = File.expand_path("../rubit-#{command}", __FILE__)
if !File.exist? path_to_command
    $stderr.puts "ğŸ˜• No such command"
    exit 1
end

exec path_to_command, *args